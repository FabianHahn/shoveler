package(default_visibility = ["//visibility:public"])

cc_library(
    name = "opengl",
    srcs = [
        "src/camera.c",
        "src/camera/identity.c",
        "src/camera/perspective.c",
        "src/canvas.c",
        "src/controller.c",
        "src/drawable/cube.c",
        "src/drawable/point.c",
        "src/drawable/quad.c",
        "src/drawable/tiles.c",
        "src/filter/depth_texture_gaussian.c",
        "src/font_atlas_texture.c",
        "src/framebuffer.c",
        "src/game.c",
        "src/global.c",
        "src/input.c",
        "src/light/point.c",
        "src/light/spot.c",
        "src/material.c",
        "src/material/canvas.c",
        "src/material/color.c",
        "src/material/depth.c",
        "src/material/depth_texture_gaussian_filter.c",
        "src/material/particle.c",
        "src/material/text.c",
        "src/material/texture.c",
        "src/material/texture_sprite.c",
        "src/material/tile_sprite.c",
        "src/material/tilemap.c",
        "src/material/variation.c",
        "src/model.c",
        "src/opengl.c",
        "src/render_state.c",
        "src/sampler.c",
        "src/scene.c",
        "src/shader.c",
        "src/shader_cache.c",
        "src/shader_program.c",
        "src/shader_program/model_vertex_projected.c",
        "src/shader_program/model_vertex_screenspace.c",
        "src/sprite.c",
        "src/sprite/text.c",
        "src/sprite/texture.c",
        "src/sprite/tile.c",
        "src/sprite/tilemap.c",
        "src/text_texture_renderer.c",
        "src/texture.c",
        "src/tile_sprite_animation.c",
        "src/tilemap.c",
        "src/tileset.c",
        "src/uniform.c",
        "src/uniform_attachment.c",
        "src/uniform_map.c",
    ],
    hdrs = [
        "include/shoveler/camera.h",
        "include/shoveler/camera/identity.h",
        "include/shoveler/camera/perspective.h",
        "include/shoveler/canvas.h",
        "include/shoveler/controller.h",
        "include/shoveler/drawable.h",
        "include/shoveler/drawable/cube.h",
        "include/shoveler/drawable/point.h",
        "include/shoveler/drawable/quad.h",
        "include/shoveler/drawable/tiles.h",
        "include/shoveler/filter.h",
        "include/shoveler/filter/depth_texture_gaussian.h",
        "include/shoveler/font_atlas_texture.h",
        "include/shoveler/framebuffer.h",
        "include/shoveler/game.h",
        "include/shoveler/global.h",
        "include/shoveler/input.h",
        "include/shoveler/light.h",
        "include/shoveler/light/point.h",
        "include/shoveler/light/spot.h",
        "include/shoveler/material.h",
        "include/shoveler/material/canvas.h",
        "include/shoveler/material/color.h",
        "include/shoveler/material/depth.h",
        "include/shoveler/material/depth_texture_gaussian_filter.h",
        "include/shoveler/material/particle.h",
        "include/shoveler/material/text.h",
        "include/shoveler/material/texture.h",
        "include/shoveler/material/texture_sprite.h",
        "include/shoveler/material/tile_sprite.h",
        "include/shoveler/material/tilemap.h",
        "include/shoveler/material/variation.h",
        "include/shoveler/model.h",
        "include/shoveler/opengl.h",
        "include/shoveler/render_state.h",
        "include/shoveler/sampler.h",
        "include/shoveler/scene.h",
        "include/shoveler/shader.h",
        "include/shoveler/shader_cache.h",
        "include/shoveler/shader_program.h",
        "include/shoveler/shader_program/model_vertex.h",
        "include/shoveler/shader_program/model_vertex_projected.h",
        "include/shoveler/shader_program/model_vertex_screenspace.h",
        "include/shoveler/sprite.h",
        "include/shoveler/sprite/text.h",
        "include/shoveler/sprite/texture.h",
        "include/shoveler/sprite/tile.h",
        "include/shoveler/sprite/tilemap.h",
        "include/shoveler/text_texture_renderer.h",
        "include/shoveler/texture.h",
        "include/shoveler/tile_sprite_animation.h",
        "include/shoveler/tilemap.h",
        "include/shoveler/tileset.h",
        "include/shoveler/uniform.h",
        "include/shoveler/uniform_attachment.h",
        "include/shoveler/uniform_map.h",
    ],
    includes = ["include"],
    deps = [
        "//base",
        "@glfw",
        "@thirdparty//glad",
    ],
)

cc_test(
    name = "opengl_tests",
    srcs = [
        "src/shader_cache_test.cpp",
        "src/test.cpp",
        "src/tilemap_test.cpp",
    ],
    linkstatic = True,
    deps = [
        ":opengl",
        "@googletest//:gtest",
    ],
)
